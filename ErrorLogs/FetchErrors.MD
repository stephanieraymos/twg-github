KEY:
ðŸ”´ERRORS
ðŸŸ¡THE ISSUE
ðŸ”µATTEMPTED SOLUTIONS
ðŸŸ PARTIAL SOLUTIONS
ðŸŸ¢SOLUTIONS
âšªSUGGESTED SOLUTIONS

# FETCH ISSUES

## ðŸŸ¡ Post request no longer working

ðŸ”´context.js:189 POST http://143.110.225.28/api/v1/inventory/ 500 (Internal Server Error)
postTrucks @ context.js:189

ðŸ”´Uncaught (in promise) SyntaxError: Unexpected token < in JSON at position 1

ðŸŸ Errors go away and posting is successful if contents + manifest (both of which are arrays) are commented out. The contents have not been edited on the front end. Edits were made on the back end to make contents + manifest an array instead of a string.

âšªNeed to figure out a way to send over the data as an array without errors

ðŸ”µATTEMPTED

```
            <input
              className="truckload-inputs"
              type="text"
              value={[truckContents]}
              onChange={(e) => setTruckContents(e.target.value)}
              placeholder="What's in the truck?"
            />
            <input
              type="file"
              multiple
              value={[truckManifest]}
              name="truckManifest[]"
              className="truckload-inputs"
              onChange={(e) => setTruckManifest(e.target.value)}
            />
```

ðŸ”´context.js:189 POST http://143.110.225.28/api/v1/inventory/ 500 (Internal Server Error)
postTrucks @ context.js:189

ðŸ”´VM1184:2 Uncaught (in promise) SyntaxError: Unexpected token < in JSON at position 1

ðŸ”µATTEMPTED

```
            <input
              className="truckload-inputs"
              type="text"
              value={[truckContents[0]]}
              onChange={(e) => setTruckContents(e.target.value)}
              placeholder="What's in the truck?"
            />
            <input
              type="file"
              multiple
              value={[truckManifest[0]]}
              name="truckManifest[]"
              className="truckload-inputs"
              onChange={(e) => setTruckManifest(e.target.value)}
            />
```

ðŸ”´ ERROR A: Uncaught DOMException: Failed to set the 'value' property on 'HTMLInputElement': This input element accepts a filename, which may only be programmatically set to the empty string. at HTMLInputElement.set [as value]

ðŸŸ ERROR B was solved while still keeping e.target.files by changing newTrucks to an array instead of an object like so:

```Â Â Â Â Â Â 
constÂ newTruckÂ =Â [
Â Â Â Â Â Â Â Â id,
Â Â Â Â Â Â Â Â truckName,
Â Â Â Â Â Â Â Â truckPrice,
Â Â Â Â Â Â Â Â truckContents,
Â Â Â Â Â Â Â Â truckManifest,
Â Â Â Â Â Â ];
```

Was:

```Â Â Â 
Â Â Â constÂ newTruckÂ =Â {
Â Â Â Â Â Â Â Â id,
Â Â Â Â Â Â Â Â truckName,
Â Â Â Â Â Â Â Â truckPrice,
Â Â Â Â Â Â Â Â truckContents,
Â Â Â Â Â Â Â Â truckManifest,
Â Â Â Â Â Â };
```

But now the post is still not showing on database, or in the list below the add truckLoad inputs. But the truckLoad is displaying all the data properly in the console on the page with the inputs.

Current errors:
ðŸ”´context.js:189 POST http://143.110.225.28/api/v1/inventory/ 500 (Internal Server Error)
postTrucks @ context.js:189
ðŸ”´VM1487:2 Uncaught (in promise) SyntaxError: Unexpected token < in JSON at position 1

ðŸŸ¡truckLoad is printing in the console with the values as index position instead of truckName, truckPrice ect:

```
TruckLoad:
[Array(5)]
0: Array(5)
0: ""
1: "asdf"
2: "asdf"
3: "asdf"
4: Array(1)
0: File {name: "id_rsa.pub", lastModified: 1613427861430, lastModifiedDate: Mon Feb 15 2021 14:24:21 GMT-0800 (Pacific Standard Time), webkitRelativePath: "", size: 579, â€¦}
length: 1
```

ðŸŸ Wrapped contents of newTruck in an object; now I get this in the console:

```
TruckLoad:
	1. [Array(1)]
		1. 0:Â Array(1)
			1. 0:
				1. id:Â ""
				2. truckContents:Â "asdf"
				3. truckManifest:Â [File]
				4. truckName:Â "asdf"
				5. truckPrice:Â "asdf"
```

CHANGE:

```
Â Â Â Â Â Â letÂ newTruckÂ =Â [{
Â Â Â Â Â Â Â Â id,
Â Â Â Â Â Â Â Â truckName,
Â Â Â Â Â Â Â Â truckPrice,
Â Â Â Â Â Â Â Â truckContents,
Â Â Â Â Â Â Â Â truckManifest,
Â Â Â Â Â Â }];
```

ðŸŸ Put each value in object or array and got this:

```
TruckLoad:
	1. [Array(5)]
		1. 0:Â Array(5)
			1. 0:Â {id:Â ""}
			2. 1:Â {truckName:Â "asdf"}
			3. 2:Â {truckPrice:Â "asdf"}
			4. 3:Â ["asdf"]
			5. 4:Â [Array(1)]
```

CHANGE:

```
Â Â Â Â Â Â letÂ newTruckÂ =Â [
Â Â Â Â Â Â Â Â {id},
Â Â Â Â Â Â Â Â {truckName},
Â Â Â Â Â Â Â Â {truckPrice},
Â Â Â Â Â Â Â Â [truckContents],
Â Â Â Â Â Â Â Â [truckManifest],
Â Â Â Â Â Â ];
```

ðŸŸ Post is working again, but file still is not posting to db, and contents are not printing to the Inventory list on the add inventory page
[Changes - bitbucket commit](https://bitbucket.org/rldev2/twg/commits/add072b0fa893003bb37fc984074c1aa4f91ad28)

ðŸŸ FILE IS POSTING TO DATABASE! But contents are still not printing to the Inventory list on the add inventory page
[Changes - bitbucket commit](https://bitbucket.org/rldev2/twg/commits/62d5446827153d6b1f2cf924dad6c63c6027667f)

ðŸŸ£Need to find solution for fetching file
